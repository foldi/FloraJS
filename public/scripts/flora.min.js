/*! florajs v3.1.2 - 2016-06-21 08:06:25 
Vince Allen |Brooklyn, NY | vince@vinceallen.com | @vinceallenvince | License: MIT */

!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Flora=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a){this._borders=[],this.id=a||d._idCount,d._idCount++}var e=a("drawing-utils-lib");d._idCount=0,d.prototype.name="BorderPalette",d.prototype.addBorder=function(a){if(!a.min||!a.max||!a.style)throw new Error("BorderPalette.addBorder requires min, max and style paramaters.");for(var b=0,c=e.getRandomNumber(a.min,a.max);c>b;b++)this._borders.push(a.style);return this},d.prototype.getBorder=function(){if(this._borders.length>0)return this._borders[e.getRandomNumber(0,this._borders.length-1)];throw new Error("BorderPalette.getBorder: You must add borders via addBorder() before using getBorder().")},b.exports=d},{"drawing-utils-lib":7}],2:[function(a,b,c){function d(){d._idCount++}var e=a("vector2d-lib");d._idCount=0,d._stylePosition="transform: translate3d(<x>px, <y>px, 0) rotate(<angle>deg) scale(<scale>, <scale>); -webkit-transform: translate3d(<x>px, <y>px, 0) rotate(<angle>deg) scale(<scale>, <scale>); -moz-transform: translate3d(<x>px, <y>px, 0) rotate(<angle>deg) scale(<scale>, <scale>); -o-transform: translate3d(<x>px, <y>px, 0) rotate(<angle>deg) scale(<scale>, <scale>); -ms-transform: translate3d(<x>px, <y>px, 0) rotate(<angle>deg) scale(<scale>, <scale>);",d.baseElement="div",d.baseElementAttributes={},d.prototype.init=function(a,b){if(!a||"object"!=typeof a)throw new Error("Item requires an instance of World.");this.world=a;var c=b||{};if(this.name="undefined"!=typeof this.name?this.name:c.name||"Item",this.width="undefined"!=typeof this.width?this.width:"undefined"==typeof c.width?10:c.width,this.height="undefined"!=typeof this.height?this.height:"undefined"==typeof c.height?10:c.height,this.scale="undefined"!=typeof this.scale?this.scale:"undefined"==typeof c.scale?1:c.scale,this.angle="undefined"!=typeof this.angle?this.angle:c.angle||0,this.colorMode="undefined"!=typeof this.colorMode?this.colorMode:c.colorMode||"rgb",this.color="undefined"!=typeof this.color?this.color:c.color||[200,200,200],this.borderWidth="undefined"!=typeof this.borderWidth?this.borderWidth:c.borderWidth||0,this.borderStyle="undefined"!=typeof this.borderStyle?this.borderStyle:c.borderStyle||"none",this.borderColor="undefined"!=typeof this.borderColor?this.borderColor:c.borderColor||[255,255,255],this.borderRadius="undefined"!=typeof this.borderRadius?this.borderRadius:c.borderRadius||0,this.boxShadowOffsetX="undefined"!=typeof this.boxShadowOffsetX?this.boxShadowOffsetX:c.boxShadowOffsetX||0,this.boxShadowOffsetY="undefined"!=typeof this.boxShadowOffsetY?this.boxShadowOffsetY:c.boxShadowOffsetY||0,this.boxShadowBlur="undefined"!=typeof this.boxShadowBlur?this.boxShadowBlur:c.boxShadowBlur||0,this.boxShadowSpread="undefined"!=typeof this.boxShadowSpread?this.boxShadowSpread:c.boxShadowSpread||0,this.boxShadowColor="undefined"!=typeof this.boxShadowColor?this.boxShadowColor:c.boxShadowColor||[255,255,255],this.opacity="undefined"!=typeof this.opacity?this.opacity:"undefined"==typeof c.opacity?1:c.opacity,this.zIndex="undefined"!=typeof this.zIndex?this.zIndex:c.zIndex||0,this.visibility="undefined"!=typeof this.visibility?this.visibility:c.visibility||"visible",this.mass="undefined"!=typeof this.mass?this.mass:"undefined"==typeof c.mass?10:c.mass,this.acceleration="undefined"!=typeof this.acceleration?this.acceleration:c.acceleration||new e,this.velocity="undefined"!=typeof this.velocity?this.velocity:c.velocity||new e,this.location="undefined"!=typeof this.location?this.location:c.location||new e(this.world.width/2,this.world.height/2),this.maxSpeed="undefined"!=typeof this.maxSpeed?this.maxSpeed:"undefined"==typeof c.maxSpeed?10:c.maxSpeed,this.minSpeed="undefined"!=typeof this.minSpeed?this.minSpeed:c.minSpeed||0,this.bounciness="undefined"!=typeof this.bounciness?this.bounciness:"undefined"==typeof c.bounciness?.5:c.bounciness,this.life="undefined"!=typeof this.life?this.life:c.life||0,this.lifespan="undefined"!=typeof this.lifespan?this.lifespan:"undefined"==typeof c.lifespan?-1:c.lifespan,this.checkWorldEdges="undefined"!=typeof this.checkWorldEdges?this.checkWorldEdges:"undefined"==typeof c.checkWorldEdges?!0:c.checkWorldEdges,this.wrapWorldEdges="undefined"!=typeof this.wrapWorldEdges?this.wrapWorldEdges:!!c.wrapWorldEdges,this.beforeStep="undefined"!=typeof this.beforeStep?this.beforeStep:c.beforeStep||function(){},this.afterStep="undefined"!=typeof this.afterStep?this.afterStep:c.afterStep||function(){},this.controlCamera="undefined"!=typeof this.controlCamera?this.controlCamera:!!c.controlCamera,this._force=this._force||new e,this.id=this.name+d._idCount,!this.el){this.el=document.createElement(d.baseElement);for(var f in d.baseElementAttributes)d.baseElementAttributes.hasOwnProperty(f)&&(this.el[f]=d.baseElementAttributes[f]);this.el.id=this.id,this.el.className="item "+this.name.toLowerCase(),this.el.style.position="absolute",this.el.style.top="-5000px",this.world.add(this.el)}},d.prototype.step=function(){var a=this.location.x,b=this.location.y;this.beforeStep.call(this),this.applyForce(this.world.gravity),this.applyForce(this.world.wind),this.velocity.add(this.acceleration),this.velocity.limit(this.maxSpeed,this.minSpeed),this.location.add(this.velocity),this.checkWorldEdges?this._checkWorldEdges():this.wrapWorldEdges&&this._wrapWorldEdges(),this.controlCamera&&this._checkCameraEdges(a,b,this.location.x,this.location.y),this.acceleration.mult(0),this.afterStep.call(this)},d.prototype.applyForce=function(a){return a?(this._force.x=a.x,this._force.y=a.y,this._force.div(this.mass),this.acceleration.add(this._force),this.acceleration):void 0},d.prototype._checkWorldEdges=function(){var a=this.world.width,b=this.world.height,c=this.location,d=this.velocity,e=this.width*this.scale,f=this.height*this.scale,g=this.bounciness;c.x+e/2>a?(c.x=a-e/2,d.x*=-1*g):c.x<e/2&&(c.x=e/2,d.x*=-1*g),c.y+f/2>b?(c.y=b-f/2,d.y*=-1*g):c.y<f/2&&(c.y=f/2,d.y*=-1*g)},d.prototype._wrapWorldEdges=function(){var a=this.world.width,b=this.world.height,c=this.location,d=this.width*this.scale,e=this.height*this.scale;c.x-d/2>a?c.x=-d/2:c.x<-d/2&&(c.x=a+d/2),c.y-e/2>b?c.y=-e/2:c.y<-e/2&&(c.y=b+e/2)},d.prototype._checkCameraEdges=function(a,b,c,d){this.world._camera.x=a-c,this.world._camera.y=b-d},d.prototype.draw=function(){var a=this.getCSSText({x:this.location.x-this.width/2,y:this.location.y-this.height/2,angle:this.angle,scale:this.scale||1,width:this.width,height:this.height,colorMode:this.colorMode,color0:this.color[0],color1:this.color[1],color2:this.color[2],opacity:this.opacity,zIndex:this.zIndex,visibility:this.visibility});this.el.style.cssText=a},d.prototype.getCSSText=function(a){return d._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+"width: "+a.width+"px; height: "+a.height+"px; background-color: "+a.colorMode+"("+a.color0+", "+a.color1+("hsl"===a.colorMode?"%":"")+", "+a.color2+("hsl"===a.colorMode?"%":"")+"); opacity: "+a.opacity+"; z-index: "+a.zIndex+"; visibility: "+a.visibility+";"},b.exports=d},{"vector2d-lib":16}],3:[function(a,b,c){b.exports={Item:a("./item"),System:a("./system"),Utils:a("drawing-utils-lib"),Vector:a("vector2d-lib"),World:a("./world")}},{"./item":2,"./system":4,"./world":5,"drawing-utils-lib":7,"vector2d-lib":16}],4:[function(a,b,c){var d=a("./item"),e=a("./world"),f=a("vector2d-lib"),g=a("drawing-utils-lib"),h=a("fpsdisplay");"undefined"!=typeof window&&(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame);var i={name:"System"};i.Classes={Item:d},i.gravity=new f(0,1),i.wind=new f,i._records=[],i._pool=[],i.mouse={location:new f,lastLocation:new f,velocity:new f},i.clock=0,i.frameFunction=null,i.setup=function(a){var b=a||function(){};document.body.onorientationchange=i.updateOrientation,g.addEvent(document,"mousemove",i._recordMouseLoc),g.addEvent(window,"touchstart",i._recordMouseLoc),g.addEvent(window,"touchmove",i._recordMouseLoc),g.addEvent(window,"touchend",i._recordMouseLoc),g.addEvent(window,"keyup",i._keyup),i.setupFunc=b,i.setupFunc.call(this)},i.init=function(a,b){i.setup(a,b)},i._addWorld=function(a){i._records.push(a)},i.add=function(a,b,c){for(var f,g=a||"Item",h=b||{},j=c||i.firstWorld(),k=this._records,l=0,m=i._pool.length;m>l;l++)if(i._pool[l].name===g){f=i._cleanObj(i._pool.splice(l,1)[0]);break}return f||(f="world"===g.toLowerCase()?new e(h):i.Classes[g]?new i.Classes[g](h):new d),h.name=g,f.init(j,h),k.push(f),f},i._cleanObj=function(a){for(var b in a)a.hasOwnProperty(b)&&delete a[b];return a},i.remove=function(a){var b,c,d=i._records;for(b=0,c=d.length;c>b;b++)if(d[b].id===a.id){d[b].el&&(d[b].el.style.visibility="hidden"),i._pool[i._pool.length]=d.splice(b,1)[0];break}},i.destroy=function(a){i.remove(a)},i.loop=function(a){var b,c=i._records,d=i._records.length,e=a||function(){};for(i.frameFunction||(i.frameFunction=e),b=d-1;b>=0;b-=1)if(c[b]&&c[b].step&&!c[b].world.pauseStep){if(c[b].life<c[b].lifespan)c[b].life+=1;else if(-1!==c[b].lifespan){i.remove(c[b]);continue}c[b].step()}for(d=i._records.length,b=d-1;b>=0;b-=1)c[b].draw();i.clock++,h.active&&h.update(d),i.frameFunction.call(this),"undefined"!=typeof window.requestAnimationFrame&&window.requestAnimationFrame(i.loop)},i._stepForward=function(){var a,b,c,d,e=i._records,f=i.allWorlds();for(a=0,c=f.length;c>a;a++){for(d=f[a],d.pauseStep=!0,b=e.length-1;b>=0;b-=1)e[b].step&&e[b].step();for(b=e.length-1;b>=0;b-=1)e[b].draw&&e[b].draw()}i.clock++},i._recordMouseLoc=function(a){var b,c=i.firstWorld();i.mouse.lastLocation.x=i.mouse.location.x,i.mouse.lastLocation.y=i.mouse.location.y,a.changedTouches&&(b=a.changedTouches[0]),a.pageX&&a.pageY?(i.mouse.location.x=g.map(a.pageX,0,window.innerWidth,0,c.width),i.mouse.location.y=g.map(a.pageY,0,window.innerHeight,0,c.height)):a.clientX&&a.clientY?(i.mouse.location.x=g.map(a.clientX,0,window.innerWidth,0,c.width),i.mouse.location.y=g.map(a.clientY,0,window.innerHeight,0,c.height)):b&&(i.mouse.location.x=b.pageX,i.mouse.location.y=b.pageY),i.mouse.velocity.x=i.mouse.lastLocation.x-i.mouse.location.x,i.mouse.velocity.y=i.mouse.lastLocation.y-i.mouse.location.y},i.firstWorld=function(){return this._records.length?this._records[0]:null},i.allWorlds=function(){return i.getAllItemsByName("World")},i.getAllItemsByName=function(a,b){var c,d,e=[],f=b||this._records;for(c=0,d=f.length;d>c;c++)f[c].name===a&&(e[e.length]=f[c]);return e},i.getAllItemsByAttribute=function(a,b,c){var d,e,f=[],g=this._records,h="undefined"!=typeof b?b:null,i=c||!1;for(d=0,e=g.length;e>d;d++)if("undefined"!=typeof g[d][a]){if(null!==h&&g[d][a]!==h)continue;if(i&&g[d].name!==i)continue;f[f.length]=g[d]}return f},i.updateOrientation=function(){var a,b=i.allWorlds(),c=b.length;for(a=0;c>a;a++)b[a].width=b[a].el.scrollWidth,b[a].height=b[a].el.scrollHeight},i._keyup=function(a){var b,c,d,e=i.allWorlds();switch(a.keyCode){case 39:i._stepForward();break;case 80:for(b=0,c=e.length;c>b;b++)d=e[b],d.pauseStep=!d.pauseStep;break;case 82:i._resetSystem();break;case 83:i._toggleFPS()}},i._resetSystem=function(){var a,b,c,d=i.allWorlds();for(a=0,b=d.length;b>a;a++)for(c=d[a],c.pauseStep=!1,c.pauseDraw=!1;c.el.firstChild;)c.el.removeChild(c.el.firstChild);i._records=[],i._pool=[],i.clock=0,i.setup(i.setupFunc)},i._toggleFPS=function(){h.fps?h.active=!h.active:h.init(),h.active?h.show():h.hide()},b.exports=i},{"./item":2,"./world":5,"drawing-utils-lib":7,fpsdisplay:8,"vector2d-lib":16}],5:[function(a,b,c){function d(a){f.call(this);var b=a||{};this.el=b.el||document.body,this.name="World",this.world={}}var e=a("vector2d-lib"),f=a("./item"),g=a("drawing-utils-lib");g.extend(d,f),d.prototype.init=function(a,b){d._superClass.init.call(this,this.world,b);var c=b||{};this.color=c.color||[0,0,0],this.width=c.width||this.el.scrollWidth,this.height=c.height||this.el.scrollHeight,this.location=c.location||new e(document.body.scrollWidth/2,document.body.scrollHeight/2),this.borderWidth=c.borderWidth||0,this.borderStyle=c.borderStyle||"none",this.borderColor=c.borderColor||[0,0,0],this.gravity=c.gravity||new e(0,1),this.c="undefined"!=typeof c.c?c.c:.1,this.pauseStep=!!c.pauseStep,this.pauseDraw=!!c.pauseDraw,this.el.className=this.name.toLowerCase(),this._camera=this._camera||new e},d.prototype.add=function(a){this.el.appendChild(a)},d.prototype.step=function(){this.location.add(this._camera)},d.prototype.draw=function(){var a=this.getCSSText({x:this.location.x-this.width/2,y:this.location.y-this.height/2,angle:this.angle,scale:this.scale||1,width:this.width,height:this.height,color0:this.color[0],color1:this.color[1],color2:this.color[2],borderWidth:this.borderWidth,borderStyle:this.borderStyle,borderColor1:this.borderColor[0],borderColor2:this.borderColor[1],borderColor3:this.borderColor[2]});this.el.style.cssText=a},d.prototype.getCSSText=function(a){return f._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+"width: "+a.width+"px; height: "+a.height+"px; background-color: rgb("+a.color0+", "+a.color1+", "+a.color2+"); border: "+a.borderWidth+"px "+a.borderStyle+" rgb("+a.borderColor1+", "+a.borderColor2+", "+a.borderColor3+")"},b.exports=d},{"./item":2,"drawing-utils-lib":7,"vector2d-lib":16}],6:[function(a,b,c){function d(a){this._gradients=[],this._colors=[],this.id=a||d._idCount,d._idCount++}var e=a("drawing-utils-lib");d._idCount=0,d.prototype.name="ColorPalette",d.prototype.addColor=function(a){if(!(a.min&&a.max&&a.startColor&&a.endColor))throw new Error("ColorPalette.addColor must pass min, max, startColor and endColor options.");var b,c,f;for(c=e.getRandomNumber(a.min,a.max),f=d._createColorRange(a.startColor,a.endColor,255),b=0;c>b;b++)this._colors.push(f[e.getRandomNumber(0,f.length-1)]);return this},d._createColorRange=function(a,b,c){var d,e,f,g,h,i,j,k=[],l=a[0],m=a[1],n=a[2],o=b[0],p=b[1],q=b[2];for(e=o-l,f=p-m,g=q-n,d=0;c>d;d++)h=parseInt(e*d/c,10)+l,i=parseInt(f*d/c,10)+m,j=parseInt(g*d/c,10)+n,k.push([h,i,j]);return k},d.prototype.getColor=function(){if(this._colors.length>0)return this._colors[e.getRandomNumber(0,this._colors.length-1)];throw new Error("ColorPalette.getColor: You must add colors via addColor() before using getColor().")},b.exports=d},{"drawing-utils-lib":7}],7:[function(a,b,c){var d={name:"Utils"};d.extend=function(a,b){function c(){}c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a._superClass=b.prototype},d.getRandomNumber=function(a,b,c){return c?Math.random()*(b-a)+a:(b++,Math.floor(Math.random()*(b-a))+a)},d.getWindowSize=function(){var a={width:!1,height:!1};return"undefined"!=typeof window.innerWidth?(a.width=window.innerWidth,a.height=window.innerHeight):"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth?(a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight):"undefined"!=typeof document.body&&(a.width=document.body.clientWidth,a.height=document.body.clientHeight),a},d.map=function(a,b,c,d,e){var f=(a-b)/(c-b);return f*(e-d)+d},d.addEvent=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},d.degreesToRadians=function(a){if("undefined"!=typeof a)return 2*Math.PI*(a/360);if("undefined"!=typeof console)throw new Error("Error: Utils.degreesToRadians is missing degrees param.")},d.radiansToDegrees=function(a){if("undefined"!=typeof a)return a*(180/Math.PI);if("undefined"!=typeof console)throw new Error("Error: Utils.radiansToDegrees is missing radians param.")},d.constrain=function(a,b,c){return a>c?c:b>a?b:a},d.isInside=function(a,b){if(!a||!b)throw new Error("isInside() requires both an object and a container.");return a.width=a.width||0,a.height=a.height||0,b.width=b.width||0,b.height=b.height||0,a.location.x+a.width/2>b.location.x-b.width/2&&a.location.x-a.width/2<b.location.x+b.width/2&&a.location.y+a.height/2>b.location.y-b.height/2&&a.location.y-a.height/2<b.location.y+b.height/2?!0:!1},d.capitalizeFirstLetter=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},b.exports=d},{}],8:[function(a,b,c){function d(){}d.name="FPSDisplay",d.active=!1,d.fps=0,d.totalItems=0,d._time=Date.now(),d._timeLastFrame=d._time,d._timeLastSecond=d._time,d._frameCount=0,d.init=function(){if(!this.el){this.active=!0,this.el=document.createElement("div"),this.el.id="FPSDisplay",this.el.className="fpsDisplay",this.el.style.backgroundColor="black",this.el.style.color="white",this.el.style.fontFamily="Helvetica",this.el.style.padding="0.5em",this.el.style.opacity="0.5",this.el.style.position="fixed",this.el.style.top=0,this.el.style.right=0,this.el.style.left=0,this.el.style.zIndex=1e3;var a=document.createElement("span");a.className="fpsDisplayLabel",a.style.marginLeft="0.5em",b=document.createTextNode("total elements: "),a.appendChild(b),this.el.appendChild(a),this.totalElementsValue=document.createTextNode("0"),this.el.appendChild(this.totalElementsValue),a=document.createElement("span"),a.className="fpsDisplayLabel",a.style.marginLeft="0.5em";var b=document.createTextNode("fps: ");a.appendChild(b),this.el.appendChild(a),this.fpsValue=document.createTextNode("0"),this.el.appendChild(this.fpsValue),document.body.appendChild(this.el)}},d.update=function(a){this.totalItems=a||0,this._time=Date.now(),this._frameCount++,this._time>this._timeLastSecond+1e3&&(this.fps=this._frameCount,this._timeLastSecond=this._time,this._frameCount=0,this.fpsValue.nodeValue=this.fps,this.totalElementsValue.nodeValue=this.totalItems)},d.hide=function(){this.el.style.display="none",d.active=!1},d.show=function(){this.el.style.display="block",d.active=!0},b.exports=d},{}],9:[function(a,b,c){var d={};d.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],d.p=[],d.perm=[],d.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]],d.config=function(a){var b,c=d.p,e=d.perm;for("undefined"==typeof a&&(a=Math),b=0;256>b;b+=1)d.p[b]=Math.floor(256*a.random());for(b=0;512>b;b+=1)e[b]=c[255&b]},d.noise=function(a,b){var c=(d.grad3,d.p);d.perm,d.simplex;c.length||d.config();var e,f,g,h,i,j=.5*(Math.sqrt(3)-1),k=(a+b)*j,l=Math.floor(a+k),m=Math.floor(b+k),n=(3-Math.sqrt(3))/6,o=(l+m)*n,p=l-o,q=m-o,r=a-p,s=b-q;r>s?(h=1,i=0):(h=0,i=1);var t=r-h+n,u=s-i+n,v=r-1+2*n,w=s-1+2*n,x=255&l,y=255&m,z=this.perm[x+this.perm[y]]%12,A=this.perm[x+h+this.perm[y+i]]%12,B=this.perm[x+1+this.perm[y+1]]%12,C=.5-r*r-s*s;0>C?e=0:(C*=C,e=C*C*this.dot(this.grad3[z],r,s));var D=.5-t*t-u*u;0>D?f=0:(D*=D,f=D*D*this.dot(this.grad3[A],t,u));var E=.5-v*v-w*w;return 0>E?g=0:(E*=E,g=E*E*this.dot(this.grad3[B],v,w)),70*(e+f+g)},d.dot=function(a,b,c){return a[0]*b+a[1]*c},b.exports=d},{}],10:[function(a,b,c){var d={Player:a("./src/player")};b.exports=d},{"./src/player":15}],11:[function(a,b,c){function d(a,b){this.context=a,this.node=a.createConvolver(),this.node.normalize=!0}d.prototype.setEffect=function(a){var b;switch(a){case 1:b=this.context.createBuffer(2,.01*this.context.sampleRate,this.context.sampleRate);break;case 2:b=this.context.createBuffer(2,1*this.context.sampleRate,this.context.sampleRate);break;case 3:b=this.context.createBuffer(2,3*this.context.sampleRate,this.context.sampleRate);break;case 4:b=this.context.createBuffer(2,6*this.context.sampleRate,this.context.sampleRate);break;case 5:b=this.context.createBuffer(2,12*this.context.sampleRate,this.context.sampleRate);break;default:return void(this.node.buffer=null)}for(var c=b.getChannelData(0),d=b.getChannelData(1),e=0,f=b.length;f>e;e++)c[e]=2*Math.random()-1,d[e]=2*Math.random()-1;this.node.buffer=b},b.exports=d},{}],12:[function(a,b,c){function d(a,b){this.node=a.createDelay()}d.prototype.setDelay=function(a){this.node.delayTime.value=a},b.exports=d},{}],13:[function(a,b,c){function d(a,b){var c=b||{};this.node=a.createGain(),this.node.gain.value="undefined"==typeof c.value?.1:c.value}d.prototype.changeGain=function(a){this.node.gain.value=a},b.exports=d},{}],14:[function(a,b,c){function d(a,b){var c=b||{};this.node=a.createOscillator(),this.node.type=c.type||"sine",this.node.frequency.value="undefined"!=typeof c.frequency?c.frequency:150,this._isPlaying=!1}d.prototype.play=function(){this.node.start(0)},d.prototype.stop=function(){this.node.stop(0)},d.prototype.toggle=function(){this._isPlaying?this.stop():this.play(),this._isPlaying=!this._isPlaying},d.prototype.changeFrequency=function(a){this.node.frequency.value=a},b.exports=d},{}],15:[function(a,b,c){function d(){this.name="Player",this.gain=null,this.oscA=null,this.oscB=null,this.convolver=null,this.delay=null,this.clock=0}var e=a("./convolver"),f=a("./delay"),g=a("./gain"),h=a("./oscillator"),i=a("quietriot"),j=a("drawing-utils-lib");d.audio_context=null,d.prototype.init=function(a){var b=a||{},c=d.audio_context;this.perlin="undefined"!=typeof b.perlin?b.perlin:!0,this.reverb="undefined"!=typeof b.reverb?b.reverb:4,this.delayTime=b.delayTime||0,this.oscAFreq="undefined"!=typeof b.oscAFreq?b.oscAFreq:150,this.oscBFreq="undefined"!=typeof b.oscBFreq?b.oscBFreq:200,this.oscARate="undefined"!=typeof b.oscARate?b.oscARate:.001,this.oscBRate="undefined"!=typeof b.oscBRate?b.oscBRate:-.001,this.freqMin="undefined"!=typeof b.freqMin?b.freqMin:150,this.freqMax="undefined"!=typeof b.freqMax?b.freqMax:200,this.volume="undefined"!=typeof b.volume?b.volume:.25,this.volumeMin="undefined"!=typeof b.volumeMin?b.volumeMin:.5,this.volumeMax="undefined"!=typeof b.volumeMax?b.volumeMax:.75,this.beforeStep=b.beforeStep||function(){},this.gain=new g(c),this.oscA=new h(c),this.oscB=new h(c),this.convolver=new e(c),this.delay=new f(c),this.oscA.toggle(),this.oscB.toggle(),this.convolver.setEffect(this.reverb),this.delay.setDelay(this.delayTime),this.gain.changeGain(this.volume),this.oscA.changeFrequency(this.oscAFreq),this.oscB.changeFrequency(this.oscBFreq),this.configure(c),this.perlin&&(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,this._loop())},d.prototype.configure=function(a){this._connect(this.gain.node,a.destination),this._connect(this.delay.node,this.gain.node),this._connect(this.convolver.node,this.delay.node),this._connect(this.oscA.node,this.convolver.node),this._connect(this.oscB.node,this.convolver.node)},d.prototype._connect=function(a,b){a.connect(b)},d.prototype._loop=function(){this.beforeStep.call(this);var a=j.map(i.noise(this.clock*this.oscARate,0),-1,1,this.freqMin,this.freqMax);this.oscA.changeFrequency(a);var b=j.map(i.noise(this.clock*this.oscBRate,0),-1,1,this.freqMin,this.freqMax),c=j.map(i.noise(this.clock*this.oscARate,0),-1,1,this.volumeMin,this.volumeMax);this.oscB.changeFrequency(b),this.gain.changeGain(c),this.clock++,"undefined"!=typeof window.requestAnimationFrame&&window.requestAnimationFrame(this._loop.bind(this))},function(a){try{d.audio_context=new(a.AudioContext||a.webkitAudioContext)}catch(b){throw new Error("No web audio support in this browser")}}(window),b.exports=d},{"./convolver":11,"./delay":12,"./gain":13,"./oscillator":14,"drawing-utils-lib":7,quietriot:9}],16:[function(a,b,c){function d(a,b){var c=a||0,d=b||0;this.x=c,this.y=d}d.VectorSub=function(a,b){return new d(a.x-b.x,a.y-b.y)},d.VectorAdd=function(a,b){return new d(a.x+b.x,a.y+b.y)},d.VectorMult=function(a,b){return new d(a.x*b,a.y*b)},d.VectorDiv=function(a,b){return new d(a.x/b,a.y/b)},d.VectorDistance=function(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))},d.VectorMidPoint=function(a,b){return d.VectorAdd(a,b).div(2)},d.VectorAngleBetween=function(a,b){var c=a.dot(b),d=Math.acos(c/(a.mag()*b.mag()));return d},d.prototype.name="Vector",d.prototype.clone=function(){function a(){}return a.prototype=this,new a},d.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},d.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this},d.prototype.mult=function(a){return this.x*=a,this.y*=a,this},d.prototype.div=function(a){return this.x=this.x/a,this.y=this.y/a,this},d.prototype.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},d.prototype.limit=function(a,b){var c=a||null,d=b||null;return c&&this.mag()>c&&(this.normalize(),this.mult(c)),d&&this.mag()<d&&(this.normalize(),this.mult(d)),this},d.prototype.normalize=function(){var a=this.mag();return 0!==a?this.div(a):void 0},d.prototype.distance=function(a){return Math.sqrt(Math.pow(a.x-this.x,2)+Math.pow(a.y-this.y,2))},d.prototype.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this.x,e=this.y;return this.x=d*b-e*c,this.y=d*c+e*b,this},d.prototype.midpoint=function(a){return d.VectorAdd(this,a).div(2)},d.prototype.dot=function(a){return this.z&&a.z?this.x*a.x+this.y*a.y+this.z*a.z:this.x*a.x+this.y*a.y},b.exports=d},{}],17:[function(a,b,c){function d(a){e.call(this)}var e=a("./mover"),f=a("burner").Utils,g=a("burner").System,h=a("burner").Vector;f.extend(d,e),d.prototype.init=function(a,b){d._superClass.init.call(this,a,b);var c=b||{};this.name=c.type||"Agent",this.followMouse=!!c.followMouse,this.maxSteeringForce="undefined"==typeof c.maxSteeringForce?5:c.maxSteeringForce,this.seekTarget=c.seekTarget||null,this.flocking=!!c.flocking,this.separateStrength="undefined"==typeof c.separateStrength?.3:c.separateStrength,this.alignStrength="undefined"==typeof c.alignStrength?.2:c.alignStrength,this.cohesionStrength="undefined"==typeof c.cohesionStrength?.1:c.cohesionStrength,this.flowField=c.flowField||null,this.sensors=c.sensors||[],this.motorSpeed=c.motorSpeed||0,this.color=c.color||[197,177,115],this.borderWidth=c.borderWidth||0,this.borderStyle=c.borderStyle||"none",this.borderColor=c.borderColor||[255,255,255],this.borderRadius=c.borderRadius||this.sensors.length?100:0,this.desiredSeparation="undefined"==typeof c.desiredSeparation?2*this.width:c.desiredSeparation,this.separateSumForceVector=new h,this.alignSumForceVector=new h,this.cohesionSumForceVector=new h,this.followTargetVector=new h,this.followDesiredVelocity=new h,this.motorDir=new h,this.velocity.mag()||(this.velocity.x=1,this.velocity.y=0,this.velocity.normalize(),this.velocity.rotate(f.degreesToRadians(this.angle)),this.velocity.mult(this.motorSpeed));for(var e=0,g=this.sensors.length;g>e;e++)this.sensors[e].parent=this},d.prototype.applyAdditionalForces=function(){var a,b,c,d,e,i,j,k;if(this.sensors.length>0)for(a=0,b=this.sensors.length;b>a;a+=1)d=this.sensors[a],e=d.offsetDistance,i=f.degreesToRadians(this.angle+d.offsetAngle),j=e*Math.cos(i),k=e*Math.sin(i),d.location.x=this.location.x,d.location.y=this.location.y,d.location.add(new h(j,k)),a&&(d.borderStyle="none"),d.activated&&("function"==typeof d.behavior?this.applyForce(d.behavior.call(this,d,d.target)):this.applyForce(d.getBehavior().call(this,d,d.target)),c=!0);if(!c&&this.motorSpeed&&(this.motorDir.x=this.velocity.x,this.motorDir.y=this.velocity.y,this.motorDir.normalize(),this.velocity.mag()>this.motorSpeed?this.motorDir.mult(-this.motorSpeed):this.motorDir.mult(this.motorSpeed),this.applyForce(this.motorDir)),this.followMouse){var l={location:new h(g.mouse.location.x,g.mouse.location.y)};this.applyForce(this._seek(l))}if(this.seekTarget&&this.applyForce(this._seek(this.seekTarget)),this.flowField){var m,n,o=this.flowField.resolution,p=Math.floor(this.location.x/o),q=Math.floor(this.location.y/o);this.flowField.field[p]&&(m=this.flowField.field[p][q],m?(this.followTargetVector.x=m.x,this.followTargetVector.y=m.y):(this.followTargetVector.x=this.location.x,this.followTargetVector.y=this.location.y),n={location:this.followTargetVector},this.applyForce(this._follow(n)))}return this.flocking&&this._flock(g.getAllItemsByName(this.name)),this.acceleration},d.prototype._seek=function(a){var b=this.world,c=h.VectorSub(a.location,this.location),d=c.mag();if(c.normalize(),d<b.width/2){var e=f.map(d,0,b.width/2,0,this.maxSpeed);c.mult(e)}else c.mult(this.maxSpeed);return c.sub(this.velocity),c.limit(this.maxSteeringForce),c},d.prototype._follow=function(a){return this.followDesiredVelocity.x=a.location.x,this.followDesiredVelocity.y=a.location.y,this.followDesiredVelocity.mult(this.maxSpeed),this.followDesiredVelocity.sub(this.velocity),this.followDesiredVelocity.limit(this.maxSteeringForce),this.followDesiredVelocity},d.prototype._flock=function(a){return this.applyForce(this._separate(a).mult(this.separateStrength)),this.applyForce(this._align(a).mult(this.alignStrength)),this.applyForce(this._cohesion(a).mult(this.cohesionStrength)),this.acceleration},d.prototype._separate=function(a){var b,c,d,e,f,g,i=0;for(this.separateSumForceVector.x=0,this.separateSumForceVector.y=0,g=this.separateSumForceVector,b=0,c=a.length;c>b;b+=1)d=a[b],this.id!==d.id&&(f=this.location.distance(d.location),f>0&&f<this.desiredSeparation&&(e=h.VectorSub(this.location,d.location),e.normalize(),e.div(f),g.add(e),i+=1));return i>0?(g.div(i),g.normalize(),g.mult(this.maxSpeed),g.sub(this.velocity),g.limit(this.maxSteeringForce),g):new h},d.prototype._align=function(a){var b,c,d,e,f,g=2*this.width,i=0;for(this.alignSumForceVector.x=0,this.alignSumForceVector.y=0,f=this.alignSumForceVector,b=0,c=a.length;c>b;b+=1)d=a[b],e=this.location.distance(d.location),e>0&&g>e&&this.id!==d.id&&(f.add(d.velocity),i+=1);return i>0?(f.div(i),f.normalize(),f.mult(this.maxSpeed),f.sub(this.velocity),f.limit(this.maxSteeringForce),f):new h},d.prototype._cohesion=function(a){var b,c,d,e,f,g=10,i=0;for(this.cohesionSumForceVector.x=0,this.cohesionSumForceVector.y=0,f=this.cohesionSumForceVector,b=0,c=a.length;c>b;b+=1)d=a[b],e=this.location.distance(d.location),e>0&&g>e&&this.id!==d.id&&(f.add(d.location),i+=1);return i>0?(f.div(i),f.sub(this.location),f.normalize(),f.mult(this.maxSpeed),f.sub(this.velocity),f.limit(this.maxSteeringForce),f):new h},b.exports=d},{"./mover":27,burner:3}],18:[function(a,b,c){function d(){f.call(this)}var e=a("burner").Item,f=a("./mover"),g=a("burner").Utils,h=a("burner").Vector;g.extend(d,f),d.prototype.init=function(a,b){d._superClass.init.call(this,a,b);var c=b||{};this.G="undefined"==typeof c.G?10:c.G,this.mass="undefined"==typeof c.mass?1e3:c.mass,this.isStatic="undefined"==typeof c.isStatic?!0:c.isStatic,this.width="undefined"==typeof c.width?100:c.width,this.height="undefined"==typeof c.height?100:c.height,this.color=c.color||[92,187,0],this.borderWidth="undefined"==typeof c.borderWidth?this.width/4:c.borderWidth,this.borderStyle=c.borderStyle||"double",this.borderColor=c.borderColor||[224,228,204],this.borderRadius="undefined"==typeof c.borderRadius?100:c.borderRadius,this.boxShadowSpread="undefined"==typeof c.boxShadowSpread?this.width/4:c.boxShadowSpread,this.boxShadowColor=c.boxShadowColor||[64,129,0],
this.opacity="undefined"==typeof c.opacity?.75:c.opacity,this.zIndex="undefined"==typeof c.zIndex?1:c.zIndex},d.prototype.attract=function(a){var b=h.VectorSub(this.location,a.location),c=g.constrain(b.mag(),a.width*a.height,this.width*this.height);b.normalize();var d=this.G*this.mass*a.mass/(c*c);return b.mult(d),b},d.prototype.draw=function(){var a=this.getCSSText({x:this.location.x-this.width/2,y:this.location.y-this.height/2,angle:this.angle,scale:this.scale||1,width:this.width,height:this.height,color0:this.color[0],color1:this.color[1],color2:this.color[2],colorMode:this.colorMode,borderRadius:this.borderRadius,borderWidth:this.borderWidth,borderStyle:this.borderStyle,borderColor0:this.borderColor[0],borderColor1:this.borderColor[1],borderColor2:this.borderColor[2],boxShadowOffsetX:this.boxShadowOffsetX,boxShadowOffsetY:this.boxShadowOffsetY,boxShadowBlur:this.boxShadowBlur,boxShadowSpread:this.boxShadowSpread,boxShadowColor0:this.boxShadowColor[0],boxShadowColor1:this.boxShadowColor[1],boxShadowColor2:this.boxShadowColor[2],opacity:this.opacity,zIndex:this.zIndex,visibility:this.visibility});this.el.style.cssText=a},d.prototype.getCSSText=function(a){return e._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+"width: "+a.width+"px; height: "+a.height+"px; background-color: "+a.colorMode+"("+a.color0+", "+a.color1+("hsl"===a.colorMode?"%":"")+", "+a.color2+("hsl"===a.colorMode?"%":"")+"); border: "+a.borderWidth+"px "+a.borderStyle+" "+a.colorMode+"("+a.borderColor0+", "+a.borderColor1+("hsl"===a.colorMode?"%":"")+", "+a.borderColor2+("hsl"===a.colorMode?"%":"")+"); border-radius: "+a.borderRadius+"%; box-shadow: "+a.boxShadowOffsetX+"px "+a.boxShadowOffsetY+"px "+a.boxShadowBlur+"px "+a.boxShadowSpread+"px "+a.colorMode+"("+a.boxShadowColor0+", "+a.boxShadowColor1+("hsl"===a.colorMode?"%":"")+", "+a.boxShadowColor2+("hsl"===a.colorMode?"%":"")+"); opacity: "+a.opacity+"; z-index: "+a.zIndex+"; visibility: "+a.visibility+";"},b.exports=d},{"./mover":27,burner:3}],19:[function(a,b,c){function d(){this.name="Caption"}var e=(a("burner").System,a("burner").Utils);d.prototype.init=function(a,b){var c,d,f,g=b||{};if(!a)throw new Error("Caption.init requires an instance of World.");for(this.world=a,this.position=g.position||"top left",this.text=g.text||"",this.opacity="undefined"==typeof g.opacity?.75:g.opacity,this.color=g.color||[255,255,255],this.borderWidth=g.borderWidth||0,this.borderStyle=g.borderStyle||"none",this.borderColor=g.borderColor||[204,204,204],this.colorMode="rgb",this.el=document.createElement("div"),this.el.id="caption",this.el.className="caption ",f=this.position.split(" "),c=0,d=f.length;d>c;c++)this.el.className=this.el.className+"caption"+e.capitalizeFirstLetter(f[c])+" ";this.el.style.opacity=this.opacity,this.el.style.color=this.colorMode+"("+this.color[0]+", "+this.color[1]+", "+this.color[2]+")",this.el.style.borderWidth=this.borderWidth+"px",this.el.style.borderStyle=this.borderStyle,"string"==typeof this.borderColor?this.el.style.borderColor=this.borderColor:this.el.style.borderColor=this.colorMode+"("+this.borderColor[0]+", "+this.borderColor[1]+", "+this.borderColor[2]+")",this.el.style.zIndex=100,this.el.appendChild(document.createTextNode(this.text)),document.getElementById("caption")&&document.getElementById("caption").parentNode.removeChild(document.getElementById("caption")),this.world.el.appendChild(this.el)},d.prototype.draw=function(){},d.prototype.update=function(a){this.el.textContent=a},d.prototype.remove=function(){this.el.parentNode.removeChild(this.el)},b.exports=d},{burner:3}],20:[function(a,b,c){var d={borderStyles:["none","solid","dotted","dashed","double","inset","outset","groove","ridge"],defaultColorList:[{name:"cold",startColor:[88,129,135],endColor:[171,244,255],boxShadowColor:[132,192,201]},{name:"food",startColor:[186,255,130],endColor:[84,187,0],boxShadowColor:[57,128,0]},{name:"heat",startColor:[255,132,86],endColor:[175,47,0],boxShadowColor:[255,69,0]},{name:"light",startColor:[255,255,255],endColor:[189,148,0],boxShadowColor:[255,200,0]},{name:"oxygen",startColor:[130,136,255],endColor:[49,56,205],boxShadowColor:[60,64,140]}],keyMap:{pause:80,resetSystem:82,stats:83},touchMap:{stats:2,pause:3,reset:4}};b.exports.config=d},{}],21:[function(a,b,c){function d(){e.call(this)}var e=a("burner").Item,f=a("burner").Utils,g=a("burner").Vector;f.extend(d,e),d.prototype.init=function(a,b){if(d._superClass.init.call(this,a,b),!b||!b.parentA||!b.parentB)throw new Error("Connector: both parentA and parentB are required.");this.parentA=b.parentA,this.parentB=b.parentB,this.zIndex=b.zIndex||0,this.borderStyle=b.borderStyle||"dotted",this.borderColor=b.borderColor||[150,150,150],this.borderWidth=1,this.borderRadius=0,this.height=0,this.color="transparent"},d.prototype.step=function(){var a=this.parentA.location,b=this.parentB.location;this.width=Math.floor(g.VectorSub(this.parentA.location,this.parentB.location).mag()),this.location=g.VectorAdd(this.parentA.location,this.parentB.location).div(2),this.angle=f.radiansToDegrees(Math.atan2(b.y-a.y,b.x-a.x))},d.prototype.draw=function(){var a=this.getCSSText({x:this.location.x-this.width/2,y:this.location.y-this.height/2,angle:this.angle,scale:this.scale||1,width:this.width,height:this.height,color0:this.color[0],color1:this.color[1],color2:this.color[2],colorMode:this.colorMode,borderRadius:this.borderRadius,borderWidth:this.borderWidth,borderStyle:this.borderStyle,borderColor0:this.borderColor[0],borderColor1:this.borderColor[1],borderColor2:this.borderColor[2],visibility:this.visibility});this.el.style.cssText=a},d.prototype.getCSSText=function(a){return e._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+"width: "+a.width+"px; height: "+a.height+"px; background-color: "+a.colorMode+"("+a.color0+", "+a.color1+("hsl"===a.colorMode?"%":"")+", "+a.color2+("hsl"===a.colorMode?"%":"")+"); border: "+a.borderWidth+"px "+a.borderStyle+" "+a.colorMode+"("+a.borderColor0+", "+a.borderColor1+("hsl"===a.colorMode?"%":"")+", "+a.borderColor2+("hsl"===a.colorMode?"%":"")+"); border-radius: "+a.borderRadius+"%; visibility: "+a.visibility+";"},b.exports=d},{burner:3}],22:[function(a,b,c){function d(a){e.call(this)}var e=a("./attractor"),f=a("burner").Utils;f.extend(d,e),d.prototype.init=function(a,b){d._superClass.init.call(this,a,b);var c=b||{};this.c="undefined"==typeof c.c?1:c.c,this.mass="undefined"==typeof c.mass?1e3:c.mass,this.isStatic="undefined"==typeof c.isStatic?!0:c.isStatic,this.width="undefined"==typeof c.width?100:c.width,this.height="undefined"==typeof c.height?100:c.height,this.color=c.color||[105,210,231],this.borderWidth="undefined"==typeof c.borderWidth?this.width/4:c.borderWidth,this.borderStyle=c.borderStyle||"double",this.borderColor=c.borderColor||[167,219,216],this.borderRadius="undefined"==typeof c.borderRadius?100:c.borderRadius,this.boxShadowSpread="undefined"==typeof c.boxShadowSpread?this.width/4:c.boxShadowSpread,this.boxShadowColor=c.boxShadowColor||[147,199,196],this.opacity="undefined"==typeof c.opacity?.75:c.opacity,this.zIndex="undefined"==typeof c.zIndex?1:c.zIndex},d.prototype.drag=function(a){var b=a.velocity.mag(),c=-1*this.c*b*b;return this._force.x=a.velocity.x,this._force.y=a.velocity.y,this._force.normalize(),this._force.mult(c),this._force},b.exports=d},{"./attractor":18,burner:3}],23:[function(a,b,c){function d(){f.call(this)}var e=a("./flowfieldmarker"),f=a("burner").Item,g=a("quietriot"),h=(a("burner").System,a("burner").Utils),i=a("burner").Vector;h.extend(d,f),d.prototype.init=function(a,b){d._superClass.init.call(this,a,b);var c=b||{};this.resolution="undefined"!=typeof c.resolution?c.resolution:50,this.perlinSpeed="undefined"!=typeof c.perlinSpeed?c.perlinSpeed:.01,this.perlinTime="undefined"!=typeof c.perlinTime?c.perlinTime:100,this.field=c.field||null,this.createMarkers=!!c.createMarkers,this.world=a,this.lifespan=-1},d.prototype.build=function(){var a,b,c,d,f,j,k,l,m,n,o,p,q={},r=this.world,s=Math.ceil(r.width/parseFloat(this.resolution)),t=Math.ceil(r.height/parseFloat(this.resolution)),u=this.perlinTime;for(a=0,b=s;b>a;a+=1){for(p=this.perlinTime,q[a]={},c=0,d=t;d>c;c+=1){if(f=a*this.resolution+this.resolution/2,j=c*this.resolution+this.resolution/2,k=h.map(g.noise(u,p),0,1,0,2*Math.PI),l=Math.cos(k),m=Math.sin(k),n=new i(l,m),q[a][c]=n,o=h.radiansToDegrees(Math.atan2(m,l)),this.createMarkers){var v=new e;r.el.appendChild(v.init({location:new i(f,j),scale:1,opacity:h.map(o,-360,360,.1,.75),width:this.resolution,height:this.resolution/2,field:n,angle:o,colorMode:"rgb",color:[200,100,50],borderRadius:0,zIndex:0}))}p+=parseFloat(this.perlinSpeed)}u+=parseFloat(this.perlinSpeed)}this.field=q},d.prototype.step=function(){},d.prototype.draw=function(){},b.exports=d},{"./flowfieldmarker":24,burner:3,quietriot:9}],24:[function(a,b,c){function d(){e.call(this)}var e=a("burner").Item,f=(a("burner").System,a("burner").Utils);a("burner").Vector;f.extend(d,e),d.prototype.init=function(a){if(!a)throw new Error("FlowFieldMarker requires location, scale, angle, opacity, width, height, colorMode, and color.");var b=document.createElement("div"),c=document.createElement("div");return b.className="flowFieldMarker item",c.className="nose",b.appendChild(c),b.style.cssText=this.getCSSText({x:a.location.x-a.width/2,y:a.location.y-a.height/2,width:a.width,height:a.height,opacity:a.opacity,angle:a.angle,scale:1,colorMode:a.colorMode,color0:a.color[0],color1:a.color[1],color2:a.color[2],zIndex:a.zIndex,borderRadius:a.borderRadius}),b},d.prototype.getCSSText=function(a){return e._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+"width: "+a.width+"px; height: "+a.height+"px; background-color: "+a.colorMode+"("+a.color0+", "+a.color1+("hsl"===a.colorMode?"%":"")+", "+a.color2+("hsl"===a.colorMode?"%":"")+"); opacity: "+a.opacity+"; z-index: "+a.zIndex+";"},b.exports=d},{burner:3}],25:[function(a,b,c){function d(){this.name="InputMenu"}var e=(a("burner").System,a("./config").config),f=a("burner").Utils;d.prototype.init=function(a,b){var c,d,g,h=b||{};if(!a)throw new Error("Caption.init requires an instance of World.");for(this.world=a,this.position=h.position||"top left",this.opacity="undefined"==typeof h.opacity?.75:h.opacity,this.color=h.color||[255,255,255],this.borderWidth=h.borderWidth||0,this.borderStyle=h.borderStyle||"none",this.borderColor=h.borderColor||[204,204,204],this.colorMode="rgb",this.text="'"+String.fromCharCode(e.keyMap.pause).toLowerCase()+"' = pause | '"+String.fromCharCode(e.keyMap.resetSystem).toLowerCase()+"' = reset | '"+String.fromCharCode(e.keyMap.stats).toLowerCase()+"' = stats",this.el=document.createElement("div"),this.el.id="inputMenu",this.el.className="inputMenu ",g=this.position.split(" "),c=0,d=g.length;d>c;c++)this.el.className=this.el.className+"inputMenu"+f.capitalizeFirstLetter(g[c])+" ";this.el.style.opacity=this.opacity,this.el.style.color=this.colorMode+"("+this.color[0]+", "+this.color[1]+", "+this.color[2]+")",this.el.style.borderWidth=this.borderWidth+"px",this.el.style.borderStyle=this.borderStyle,"string"==typeof this.borderColor?this.el.style.borderColor=this.borderColor:this.el.style.borderColor=this.colorMode+"("+this.borderColor[0]+", "+this.borderColor[1]+", "+this.borderColor[2]+")",this.el.style.zIndex=100,this.el.appendChild(document.createTextNode(this.text)),document.getElementById("inputMenu")&&document.getElementById("inputMenu").parentNode.removeChild(document.getElementById("inputMenu")),this.world.el.appendChild(this.el)},d.prototype.draw=function(){},d.prototype.remove=function(){this.el.parentNode.removeChild(this.el)},b.exports=d},{"./config":20,burner:3}],26:[function(a,b,c){var d={BorderPalette:a("borderpalette"),ColorPalette:a("colorpalette"),SimplexNoise:a("quietriot"),SoundBed:a("soundbed"),System:a("burner").System,Utils:a("burner").Utils,Vector:a("burner").Vector,World:a("burner").World};d.System.Classes={Agent:a("./agent"),Attractor:a("./attractor"),BorderPalette:a("borderpalette"),Caption:a("./caption"),Connector:a("./connector"),Dragger:a("./dragger"),FlowField:a("./flowfield"),FlowFieldMarker:a("./flowfieldmarker"),InputMenu:a("./inputmenu"),Mover:a("./mover"),Oscillator:a("./oscillator"),Particle:a("./particle"),ParticleSystem:a("./particlesystem"),Point:a("./point"),RangeDisplay:a("./rangedisplay"),Repeller:a("./repeller"),Sensor:a("./sensor"),Stimulus:a("./stimulus"),Walker:a("./walker")},b.exports=d},{"./agent":17,"./attractor":18,"./caption":19,"./connector":21,"./dragger":22,"./flowfield":23,"./flowfieldmarker":24,"./inputmenu":25,"./mover":27,"./oscillator":28,"./particle":29,"./particlesystem":30,"./point":31,"./rangedisplay":32,"./repeller":33,"./sensor":34,"./stimulus":35,"./walker":36,borderpalette:1,burner:3,colorpalette:6,quietriot:9,soundbed:10}],27:[function(a,b,c){function d(a){e.call(this)}var e=a("burner").Item,f=a("burner").System,g=a("burner").Utils,h=a("burner").Vector;g.extend(d,e),d.prototype.init=function(a,b){d._superClass.init.call(this,a,b);var c=b||{};this.color=c.color||[255,255,255],this.borderRadius=c.borderRadius||0,this.borderWidth=c.borderWidth||0,this.borderStyle=c.borderStyle||"none",this.borderColor=c.borderColor||[0,0,0],this.pointToDirection="undefined"==typeof c.pointToDirection?!0:c.pointToDirection,this.draggable=!!c.draggable,this.parent=c.parent||null,this.pointToParentDirection="undefined"==typeof c.pointToParentDirection?!0:c.pointToParentDirection,this.offsetDistance="undefined"==typeof c.offsetDistance?0:c.offsetDistance,this.offsetAngle=c.offsetAngle||0,this.isStatic=!!c.isStatic;var e=this;this.isMouseOut=!1,this.isPressed=!1,this.mouseOutInterval=!1,this._friction=new h,this.draggable&&(g.addEvent(this.el,"mouseover",function(){return function(a){d.mouseover.call(e,a)}}()),g.addEvent(this.el,"mousedown",function(){return function(a){d.mousedown.call(e,a)}}()),g.addEvent(this.el,"mousemove",function(){return function(a){d.mousemove.call(e,a)}}()),g.addEvent(this.el,"mouseup",function(){return function(a){d.mouseup.call(e,a)}}()),g.addEvent(this.el,"mouseout",function(){return function(a){d.mouseout.call(e,a)}}()))},d.mouseover=function(){this.isMouseOut=!1,clearInterval(this.mouseOutInterval)},d.mousedown=function(){this.isPressed=!0,this.isMouseOut=!1},d.mousemove=function(a){var b,c;this.isPressed&&(this.isMouseOut=!1,a.pageX&&a.pageY?(b=a.pageX-this.world.el.offsetLeft,c=a.pageY-this.world.el.offsetTop):a.clientX&&a.clientY&&(b=a.clientX-this.world.el.offsetLeft,c=a.clientY-this.world.el.offsetTop),b&c&&(this.location=new h(b,c)),this._checkWorldEdges())},d.mouseup=function(){this.isPressed=!1},d.mouseout=function(){var a,b,c=this,d=f.mouse;this.isPressed&&(this.isMouseOut=!0,this.mouseOutInterval=setInterval(function(){c.isPressed&&c.isMouseOut&&(a=d.location.x-c.world.el.offsetLeft,b=d.location.y-c.world.el.offsetTop,c.location=new h(a,b))},16))},d.prototype.step=function(){var a,b,c=this.location.x,d=this.location.y;if(this.beforeStep.call(this),!this.isStatic&&!this.isPressed){this.world.c&&(this._friction.x=this.velocity.x,this._friction.y=this.velocity.y,this._friction.mult(-1),this._friction.normalize(),this._friction.mult(this.world.c),this.applyForce(this._friction)),this.applyForce(this.world.gravity);var e=f.getAllItemsByName("Attractor");for(a=0,b=e.length;b>a;a+=1)this.id!==e[a].id&&this.applyForce(e[a].attract(this));var i=f.getAllItemsByName("Repeller");for(a=0,b=i.length;b>a;a+=1)this.id!==i[a].id&&this.applyForce(i[a].attract(this));var j=f.getAllItemsByName("Dragger");for(a=0,b=j.length;b>a;a+=1)this.id!==j[a].id&&g.isInside(this,j[a])&&this.applyForce(j[a].drag(this));if(this.applyAdditionalForces&&this.applyAdditionalForces.call(this),this.velocity.add(this.acceleration),this.velocity.limit(this.maxSpeed,this.minSpeed),this.location.add(this.velocity),this.pointToDirection&&this.velocity.mag()>.1&&(this.angle=g.radiansToDegrees(Math.atan2(this.velocity.y,this.velocity.x))),this.wrapWorldEdges?this._wrapWorldEdges():this.checkWorldEdges&&this._checkWorldEdges(),this.controlCamera&&this._checkCameraEdges(c,d,this.location.x,this.location.y),this.parent&&(this.offsetDistance?(r=this.offsetDistance,theta=g.degreesToRadians(this.parent.angle+this.offsetAngle),c=r*Math.cos(theta),d=r*Math.sin(theta),this.location.x=this.parent.location.x,this.location.y=this.parent.location.y,this.location.add(new h(c,d)),this.pointToParentDirection&&(this.angle=g.radiansToDegrees(Math.atan2(this.parent.velocity.y,this.parent.velocity.x)))):(this.location.x=this.parent.location.x,this.location.y=this.parent.location.y)),this.acceleration.mult(0),this.life<this.lifespan)this.life+=1;else if(-1!==this.lifespan)return void f.remove(this);this.afterStep.call(this)}},d.prototype.draw=function(){var a=this.getCSSText({x:this.location.x-this.width/2,y:this.location.y-this.height/2,angle:this.angle,scale:this.scale||1,width:this.width,height:this.height,colorMode:this.colorMode,color0:this.color[0],color1:this.color[1],color2:this.color[2],opacity:this.opacity,zIndex:this.zIndex,visibility:this.visibility,borderRadius:this.borderRadius,borderWidth:this.borderWidth,borderStyle:this.borderStyle,borderColor0:this.borderColor[0],borderColor1:this.borderColor[1],borderColor2:this.borderColor[2]});this.el.style.cssText=a},d.prototype.getCSSText=function(a){return e._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+"width: "+a.width+"px; height: "+a.height+"px; background-color: "+a.colorMode+"("+a.color0+", "+a.color1+("hsl"===a.colorMode?"%":"")+", "+a.color2+("hsl"===a.colorMode?"%":"")+");  opacity: "+a.opacity+"; z-index: "+a.zIndex+"; visibility: "+a.visibility+"; border: "+a.borderWidth+"px "+a.borderStyle+" "+a.colorMode+"("+a.borderColor0+", "+a.borderColor1+("hsl"===a.colorMode?"%":"")+", "+a.borderColor2+("hsl"===a.colorMode?"%":"")+"); border-radius: "+a.borderRadius+"%;"},b.exports=d},{burner:3}],28:[function(a,b,c){function d(a){e.call(this)}var e=a("burner").Item,f=a("quietriot"),g=a("burner").System,h=a("burner").Utils,i=a("burner").Vector;h.extend(d,e),d.prototype.init=function(a,b){d._superClass.init.call(this,a,b);var c=b||{};this.acceleration=c.acceleration||new i(.01,0),this.aVelocity=c.aVelocity||new i,this.isStatic=!!c.isStatic,this.perlin=!!c.perlin,this.perlinSpeed="undefined"==typeof c.perlinSpeed?.005:c.perlinSpeed,this.perlinTime=c.perlinTime||0,this.perlinAccelLow="undefined"==typeof c.perlinAccelLow?-2:c.perlinAccelLow,this.perlinAccelHigh="undefined"==typeof c.perlinAccelHigh?2:c.perlinAccelHigh,this.perlinOffsetX="undefined"==typeof c.perlinOffsetX?1e4*Math.random():c.perlinOffsetX,this.perlinOffsetY="undefined"==typeof c.perlinOffsetY?1e4*Math.random():c.perlinOffsetY,this.width="undefined"==typeof c.width?20:c.width,this.height="undefined"==typeof c.height?20:c.height,this.color=c.color||[200,100,0],this.borderWidth=c.borderWidth||0,this.borderStyle=c.borderStyle||"solid",this.borderColor=c.borderColor||[255,150,50],this.borderRadius="undefined"==typeof c.borderRadius?100:c.borderRadius,this.boxShadowOffsetX=c.boxShadowOffsetX||0,this.boxShadowOffsetY=c.boxShadowOffsetY||0,this.boxShadowBlur=c.boxShadowBlur||0,this.boxShadowSpread=c.boxShadowSpread||0,this.boxShadowColor=c.boxShadowColor||[200,100,0],this.opacity="undefined"==typeof c.opacity?.75:c.opacity,this.zIndex="undefined"==typeof c.zIndex?1:c.zIndex,this.parent=c.parent||null,this.pointToDirection=!!c.pointToDirection,this.lastLocation=new i,this.amplitude=c.amplitude||new i(this.world.width/2-this.width,this.world.height/2-this.height),this.initialLocation=c.initialLocation||new i(this.world.width/2,this.world.height/2),this.location.x=this.initialLocation.x,this.location.y=this.initialLocation.y},d.prototype.step=function(){this.beforeStep.call(this),this.isStatic||(this.perlin?(this.perlinTime+=this.perlinSpeed,this.aVelocity.x=h.map(f.noise(this.perlinTime+this.perlinOffsetX,0),-1,1,this.perlinAccelLow,this.perlinAccelHigh),this.aVelocity.y=h.map(f.noise(0,this.perlinTime+this.perlinOffsetY),-1,1,this.perlinAccelLow,this.perlinAccelHigh)):this.aVelocity.add(this.acceleration),this.parent&&(this.initialLocation.x=this.parent.location.x,this.initialLocation.y=this.parent.location.y),this.location.x=this.initialLocation.x+Math.cos(this.aVelocity.x)*this.amplitude.x,this.location.y=this.initialLocation.y+Math.sin(this.aVelocity.y)*this.amplitude.y,this.pointToDirection&&(velDiff=i.VectorSub(this.location,this.lastLocation),this.angle=h.radiansToDegrees(Math.atan2(velDiff.y,velDiff.x))),this.life<this.lifespan?this.life+=1:-1!==this.lifespan&&g.remove(this),this.afterStep.call(this),this.lastLocation.x=this.location.x,this.lastLocation.y=this.location.y)},d.prototype.draw=function(){var a=this.getCSSText({x:this.location.x-this.width/2,y:this.location.y-this.height/2,angle:this.angle,scale:this.scale||1,width:this.width,height:this.height,color0:this.color[0],color1:this.color[1],color2:this.color[2],colorMode:this.colorMode,borderRadius:this.borderRadius,borderWidth:this.borderWidth,borderStyle:this.borderStyle,borderColor0:this.borderColor[0],borderColor1:this.borderColor[1],borderColor2:this.borderColor[2],boxShadowOffsetX:this.boxShadowOffsetX,boxShadowOffsetY:this.boxShadowOffsetY,boxShadowBlur:this.boxShadowBlur,boxShadowSpread:this.boxShadowSpread,boxShadowColor0:this.boxShadowColor[0],boxShadowColor1:this.boxShadowColor[1],boxShadowColor2:this.boxShadowColor[2],opacity:this.opacity,zIndex:this.zIndex,visibility:this.visibility});this.el.style.cssText=a},d.prototype.getCSSText=function(a){return e._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+"width: "+a.width+"px; height: "+a.height+"px; background-color: "+a.colorMode+"("+a.color0+", "+a.color1+("hsl"===a.colorMode?"%":"")+", "+a.color2+("hsl"===a.colorMode?"%":"")+"); border: "+a.borderWidth+"px "+a.borderStyle+" "+a.colorMode+"("+a.borderColor0+", "+a.borderColor1+("hsl"===a.colorMode?"%":"")+", "+a.borderColor2+("hsl"===a.colorMode?"%":"")+"); border-radius: "+a.borderRadius+"%; box-shadow: "+a.boxShadowOffsetX+"px "+a.boxShadowOffsetY+"px "+a.boxShadowBlur+"px "+a.boxShadowSpread+"px "+a.colorMode+"("+a.boxShadowColor0+", "+a.boxShadowColor1+("hsl"===a.colorMode?"%":"")+", "+a.boxShadowColor2+("hsl"===a.colorMode?"%":"")+"); opacity: "+a.opacity+"; z-index: "+a.zIndex+"; visibility: "+a.visibility+";"},b.exports=d},{burner:3,quietriot:9}],29:[function(a,b,c){function d(a){f.call(this)}var e=a("burner").Item,f=a("./mover"),g=a("burner").Utils,h=a("burner").Vector;g.extend(d,f),d.prototype.init=function(a,b){d._superClass.init.call(this,a,b);var c=b||{};this.width="undefined"==typeof c.width?20:c.width,this.height="undefined"==typeof c.height?20:c.height,this.color=c.color||[200,200,200],this.borderWidth="undefined"==typeof c.borderWidth?this.width/4:c.borderWidth,this.borderRadius="undefined"==typeof c.borderRadius?100:c.borderRadius,this.boxShadowSpread="undefined"==typeof c.boxShadowSpread?this.width/4:c.boxShadowSpread,this.lifespan="undefined"==typeof c.lifespan?50:c.lifespan,this.life=c.life||0,this.fade="undefined"==typeof c.fade?!0:c.fade,this.shrink="undefined"==typeof c.shrink?!0:c.shrink,this.checkWorldEdges=!!c.checkWorldEdges,this.maxSpeed="undefined"==typeof c.maxSpeed?4:c.maxSpeed,this.zIndex="undefined"==typeof c.zIndex?1:c.zIndex,c.acceleration||(this.acceleration=new h(1,1),this.acceleration.normalize(),this.acceleration.mult(this.maxSpeed?this.maxSpeed:3),this.acceleration.rotate(g.getRandomNumber(0,2*Math.PI,!0))),c.velocity||(this.velocity=new h),this.initWidth=this.width,this.initHeight=this.height},d.prototype.afterStep=function(){this.fade&&(this.opacity=g.map(this.life,0,this.lifespan,1,0)),this.shrink&&(this.width=g.map(this.life,0,this.lifespan,this.initWidth,0),this.height=g.map(this.life,0,this.lifespan,this.initHeight,0))},d.prototype.draw=function(){var a=this.getCSSText({x:this.location.x-this.width/2,y:this.location.y-this.height/2,angle:this.angle,scale:this.scale||1,width:this.width,height:this.height,color0:this.color[0],color1:this.color[1],color2:this.color[2],colorMode:this.colorMode,borderRadius:this.borderRadius,borderWidth:this.borderWidth,borderStyle:this.borderStyle,borderColor0:this.borderColor[0],borderColor1:this.borderColor[1],borderColor2:this.borderColor[2],boxShadowOffsetX:this.boxShadowOffsetX,boxShadowOffsetY:this.boxShadowOffsetY,boxShadowBlur:this.boxShadowBlur,boxShadowSpread:this.boxShadowSpread,boxShadowColor0:this.boxShadowColor[0],boxShadowColor1:this.boxShadowColor[1],boxShadowColor2:this.boxShadowColor[2],opacity:this.opacity,zIndex:this.zIndex,visibility:this.visibility});this.el.style.cssText=a},d.prototype.getCSSText=function(a){return e._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+"width: "+a.width+"px; height: "+a.height+"px; background-color: "+a.colorMode+"("+a.color0+", "+a.color1+("hsl"===a.colorMode?"%":"")+", "+a.color2+("hsl"===a.colorMode?"%":"")+"); border: "+a.borderWidth+"px "+a.borderStyle+" "+a.colorMode+"("+a.borderColor0+", "+a.borderColor1+("hsl"===a.colorMode?"%":"")+", "+a.borderColor2+("hsl"===a.colorMode?"%":"")+"); border-radius: "+a.borderRadius+"%; box-shadow: "+a.boxShadowOffsetX+"px "+a.boxShadowOffsetY+"px "+a.boxShadowBlur+"px "+a.boxShadowSpread+"px "+a.colorMode+"("+a.boxShadowColor0+", "+a.boxShadowColor1+("hsl"===a.colorMode?"%":"")+", "+a.boxShadowColor2+("hsl"===a.colorMode?"%":"")+"); opacity: "+a.opacity+"; z-index: "+a.zIndex+"; visibility: "+a.visibility+";"},b.exports=d},{"./mover":27,burner:3}],30:[function(a,b,c){function d(a){g.call(this)}var e=a("colorpalette"),f=a("burner").Item,g=a("./mover"),h=a("burner").System,i=a("burner").Utils,j=a("burner").Vector;i.extend(d,g),d.prototype.init=function(a,b){d._superClass.init.call(this,a,b);var c=b||{};this.width=c.width||0,this.height=c.height||0,this.color=c.color||[255,255,255],this.borderWidth=c.borderWidth||0,this.borderStyle=c.borderStyle||"none",this.borderColor=c.borderColor||[255,255,255],this.borderRadius=c.borderRadius||0,this.isStatic="undefined"==typeof c.isStatic?!0:c.isStatic,this.lifespan="undefined"==typeof c.lifespan?-1:c.lifespan,this.life="undefined"==typeof c.life?-1:c.life,this.burst="undefined"==typeof c.burst?1:c.burst,this.burstRate="undefined"==typeof c.burstRate?4:c.burstRate,this.emitRadius="undefined"==typeof c.emitRadius?3:c.emitRadius,this.startColor=c.startColor||[255,255,255],this.endColor=c.endColor||[255,0,0],this.particleOptions=c.particleOptions||{width:15,height:15,lifespan:50,borderRadius:100,checkWorldEdges:!1,acceleration:null,velocity:null,location:null,maxSpeed:3,fade:!0,shrink:!0},this.particleOptions.acceleration&&(this.initParticleAcceleration=new j(this.particleOptions.acceleration.x,this.particleOptions.acceleration.y));var f=new e;f.addColor({min:12,max:24,startColor:this.startColor,endColor:this.endColor}),this.clock=0,this.beforeStep=function(){var a,b,c=this.initParticleAcceleration;if(this.life<this.lifespan)this.life+=1;else if(-1!==this.lifespan)return void h.remove(this);if(this.clock%this.burstRate===0){a=new j(this.location.x,this.location.y),b=new j(1,1),b.normalize(),b.mult(this.emitRadius),b.rotate(i.getRandomNumber(0,2*Math.PI,!0)),a.add(b);for(var d=0;d<this.burst;d++)this.particleOptions.world=this.world,this.particleOptions.life=0,this.particleOptions.color=f.getColor(),this.particleOptions.borderStyle="solid",this.particleOptions.borderColor=f.getColor(),this.particleOptions.boxShadowColor=f.getColor(),c&&(this.particleOptions.acceleration=new j(c.x,c.y)),this.particleOptions.location=a,h.add("Particle",this.particleOptions)}this.clock++}},d.prototype.draw=function(){var a=this.getCSSText({x:this.location.x-this.width/2,y:this.location.y-this.height/2,angle:this.angle,scale:this.scale||1});this.el.style.cssText=a},d.prototype.getCSSText=function(a){return f._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+";"},b.exports=d},{"./mover":27,burner:3,colorpalette:6}],31:[function(a,b,c){function d(){e.call(this)}var e=a("burner").Item,f=a("burner").Utils;f.extend(d,e),d.prototype.init=function(a,b){d._superClass.init.call(this,a,b);var c=b||{};this.color=c.color||[200,200,200],this.borderRadius="undefined"==typeof c.borderRadius?100:c.borderRadius,this.borderWidth="undefined"==typeof c.borderWidth?2:c.borderWidth,this.borderStyle=c.borderStyle||"solid",this.borderColor=c.borderColor||[60,60,60],this.isStatic=!0},d.prototype.step=function(){},d.prototype.draw=function(){var a=this.getCSSText({x:this.location.x-this.width/2,y:this.location.y-this.height/2,angle:this.angle,scale:this.scale||1,width:this.width,height:this.height,color0:this.color[0],color1:this.color[1],color2:this.color[2],colorMode:this.colorMode,borderRadius:this.borderRadius,borderWidth:this.borderWidth,borderStyle:this.borderStyle,borderColor0:this.borderColor[0],borderColor1:this.borderColor[1],borderColor2:this.borderColor[2]});this.el.style.cssText=a},d.prototype.getCSSText=function(a){return e._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+"width: "+a.width+"px; height: "+a.height+"px; background-color: "+a.colorMode+"("+a.color0+", "+a.color1+("hsl"===a.colorMode?"%":"")+", "+a.color2+("hsl"===a.colorMode?"%":"")+"); border: "+a.borderWidth+"px "+a.borderStyle+" "+a.colorMode+"("+a.borderColor0+", "+a.borderColor1+("hsl"===a.colorMode?"%":"")+", "+a.borderColor2+("hsl"===a.colorMode?"%":"")+"); border-radius: "+a.borderRadius+"%;"},b.exports=d},{burner:3}],32:[function(a,b,c){function d(a){e.call(this)}var e=a("burner").Item,f=a("burner").Utils;f.extend(d,e),d.prototype.init=function(a,b){d._superClass.init.call(this,a,b);var c=b||{};if(!c||!c.sensor)throw new Error("RangeDisplay: a sensor is required.");this.sensor=c.sensor,this.zIndex=10,this.borderStyle=this.sensor.rangeDisplayBorderStyle||"dashed",this.borderDefaultColor=this.sensor.rangeDisplayBorderDefaultColor||[150,150,150],this.borderColor=this.borderDefaultColor,this.borderWidth=2,this.borderRadius=100,this.width=this.sensor.sensitivity,this.height=this.sensor.sensitivity,this.minOpacity=.3,this.maxOpacity=.6,this.opacity=this.minOpacity,this.maxAngularVelocity=1,this.minAngularVelocity=0},d.prototype.step=function(){this.location.x=this.sensor.location.x,this.location.y=this.sensor.location.y,this.sensor.activated?(this.opacity=this.maxOpacity,this.borderColor=this.sensor.target.color):(this.opacity=this.minOpacity,this.borderColor=this.borderDefaultColor)},d.prototype.draw=function(){var a=this.getCSSText({x:this.location.x-this.width/2,y:this.location.y-this.height/2,angle:this.angle,scale:this.scale||1,width:this.width,height:this.height,colorMode:this.colorMode,borderRadius:this.borderRadius,borderWidth:this.borderWidth,borderStyle:this.borderStyle,borderColor0:this.borderColor[0],borderColor1:this.borderColor[1],borderColor2:this.borderColor[2],visibility:this.visibility});this.el.style.cssText=a},d.prototype.getCSSText=function(a){return e._stylePosition.replace(/<x>/g,a.x).replace(/<y>/g,a.y).replace(/<angle>/g,a.angle).replace(/<scale>/g,a.scale)+"width: "+a.width+"px; height: "+a.height+"px; border: "+a.borderWidth+"px "+a.borderStyle+" "+a.colorMode+"("+a.borderColor0+", "+a.borderColor1+("hsl"===a.colorMode?"%":"")+", "+a.borderColor2+("hsl"===a.colorMode?"%":"")+"); border-radius: "+a.borderRadius+"%; visibility: "+a.visibility+";"},b.exports=d},{burner:3}],33:[function(a,b,c){function d(a){e.call(this)}var e=a("./attractor"),f=a("burner").Utils;f.extend(d,e),d.prototype.init=function(a,b){d._superClass.init.call(this,a,b);var c=b||{};this.G="undefined"==typeof c.G?-10:c.G,
this.mass="undefined"==typeof c.mass?1e3:c.mass,this.isStatic="undefined"==typeof c.isStatic?!0:c.isStatic,this.width="undefined"==typeof c.width?100:c.width,this.height="undefined"==typeof c.height?100:c.height,this.color=c.color||[250,105,0],this.borderWidth="undefined"==typeof c.borderWidth?this.width/4:c.borderWidth,this.borderStyle=c.borderStyle||"double",this.borderColor=c.borderColor||[224,228,204],this.borderRadius="undefined"==typeof c.borderRadius?100:c.borderRadius,this.boxShadowSpread="undefined"==typeof c.boxShadowSpread?this.width/4:c.boxShadowSpread,this.boxShadowColor=c.boxShadowColor||[250,105,0],this.opacity="undefined"==typeof c.opacity?.75:c.opacity,this.zIndex="undefined"==typeof c.zIndex?1:c.zIndex},b.exports=d},{"./attractor":18,burner:3}],34:[function(a,b,c){function d(a){e.call(this)}var e=a("./mover"),f=a("burner").System,g=a("burner").Utils,h=a("burner").Vector;g.extend(d,e),d.prototype.init=function(a,b){d._superClass.init.call(this,a,b);var c=b||{};this.type=c.type||"",this.targetClass=c.targetClass||"Stimulus",this.behavior=c.behavior||function(){},this.sensitivity="undefined"!=typeof c.sensitivity?c.sensitivity:200,this.width="undefined"!=typeof c.width?c.width:7,this.height="undefined"!=typeof c.height?c.height:7,this.offsetDistance="undefined"!=typeof c.offsetDistance?c.offsetDistance:30,this.offsetAngle=c.offsetAngle||0,this.opacity="undefined"!=typeof c.opacity?c.opacity:.75,this.target=c.target||null,this.activated=!!c.activated,this.activatedColor=c.activatedColor||[255,255,255],this.borderRadius="undefined"!=typeof c.borderRadius?c.borderRadius:100,this.borderWidth="undefined"!=typeof c.borderWidth?c.borderWidth:2,this.borderStyle=c.borderStyle||"solid",this.borderColor=c.borderColor||[255,255,255],this.onConsume=c.onConsume||null,this.onDestroy=c.onDestroy||null,this.rangeDisplayBorderStyle=c.rangeDisplayBorderStyle||!1,this.rangeDisplayBorderDefaultColor=c.rangeDisplayBorderDefaultColor||!1,this.parent=c.parent||null,this.displayRange=!!c.displayRange,this.displayRange&&(this.rangeDisplay=f.add("RangeDisplay",{sensor:this,rangeDisplayBorderStyle:this.rangeDisplayBorderStyle,rangeDisplayBorderDefaultColor:this.rangeDisplayBorderDefaultColor})),this.displayConnector=!!c.displayConnector,this.activationLocation=new h,this._force=new h,this.visibility="hidden"},d.prototype.step=function(){this.visibility="visible",this.parent&&(this.offsetDistance?(r=this.offsetDistance,theta=g.degreesToRadians(this.parent.angle+this.offsetAngle),x=r*Math.cos(theta),y=r*Math.sin(theta),this.location.x=this.parent.location.x,this.location.y=this.parent.location.y,this.location.add(new h(x,y)),this.pointToParentDirection&&(this.angle=g.radiansToDegrees(Math.atan2(this.parent.velocity.y,this.parent.velocity.x)))):(this.location.x=this.parent.location.x,this.location.y=this.parent.location.y));for(var a=!1,b=f.getAllItemsByAttribute("type",this.type,this.targetClass||"Stimulus"),c=0,d=b.length;d>c;c++)this._sensorActive(b[c],this.sensitivity)&&(this.target=b[c],this.activationLocation.x||this.activationLocation.y||(this.activationLocation.x=this.parent.location.x,this.activationLocation.y=this.parent.location.y),this.activated=!0,this.activatedColor=this.target.color,this.displayConnector&&!this.connector&&(this.connector=f.add("Connector",{parentA:this,parentB:this.target})),this.displayConnector&&this.connector&&this.connector.parentB!==this.target&&(this.connector.parentA=this,this.connector.parentB=this.target),a=!0);a?this.color=this.activatedColor:(this.target=null,this.activated=!1,this.state=null,this.color=[255,255,255],this.activationLocation.x=null,this.activationLocation.y=null,this.connector&&(f.remove(this.connector),this.connector=null)),this.afterStep.call(this)},d.prototype.getBehavior=function(){switch(this.behavior){case"CONSUME":return function(a,b){if(g.isInside(a.parent,b)){if(!(b.width>2))return a.onConsume&&!b.consumed&&(b.consumed=!0,a.onConsume.call(this,a,b)),void f.remove(b);b.width*=.95,a.parent[b.type+"Level"]||(a.parent[b.type+"Level"]=0),a.parent[b.type+"Level"]+=1,b.height>1&&(b.height*=.95),b.borderWidth>0&&(b.borderWidth*=.95),b.boxShadowSpread>0&&(b.boxShadowSpread*=.95)}};case"DESTROY":return function(a,b){g.isInside(a.parent,b)&&(f.add("ParticleSystem",{location:new h(b.location.x,b.location.y),lifespan:20,borderColor:b.borderColor,startColor:b.color,endColor:b.color}),f.remove(b),a.onDestroy&&a.onDestroy.call(this,a,b))};case"LIKES":return function(a,b){var c=h.VectorSub(b.location,this.location);return c.limit(this.maxSteeringForce),c};case"COWARD":return function(a,b){var c=h.VectorSub(b.location,this.location);return c.mult(-.0075),c.limit(this.maxSteeringForce),c};case"AGGRESSIVE":return function(a,b){var c=h.VectorSub(b.location,this.location),d=c.mag();if(d<2*this.width){c.normalize();var e=d/this.maxSpeed;c.mult(e)}return c.sub(this.velocity),c.limit(this.maxSteeringForce),c};case"CURIOUS":return function(a,b){var c,d;if("running"!==a.state){var e=a.activationLocation.midpoint(b.location);c=h.VectorSub(e,this.location),d=c.mag(),c.normalize();var f=d/this.maxSpeed;c.mult(f),c.sub(this.velocity),.5>f&&(a.state="running")}else c=h.VectorSub(b.location,this.location),c.mult(-1);return c.limit(this.maxSteeringForce),c};case"EXPLORER":return function(a,b){var c=h.VectorSub(b.location,this.location),d=c.mag();c.normalize();var e=d/this.maxSpeed;return c.mult(-e),c.sub(this.velocity),c.limit(.05*this.maxSteeringForce),this.motorDir.x=this.velocity.x,this.motorDir.y=this.velocity.y,this.motorDir.normalize(),this.velocity.mag()>this.motorSpeed?this.motorDir.mult(-this.motorSpeed):this.motorDir.mult(this.motorSpeed),c.add(this.motorDir),c};case"LOVES":return function(a,b){var c=h.VectorSub(b.location,this.location),d=c.mag();if(d>this.width/2){c.normalize();var e=d/this.maxSpeed;c.mult(e);var f=h.VectorSub(c,this.velocity);return f.limit(.25*this.maxSteeringForce),f}return this.angle=g.radiansToDegrees(Math.atan2(c.y,c.x)),this._force.x=0,this._force.y=0,this._force};case"ACCELERATE":return function(a,b){return this._force.x=this.velocity.x,this._force.y=this.velocity.y,this._force.mult(.25)};case"DECELERATE":return function(a,b){return this._force.x=this.velocity.x,this._force.y=this.velocity.y,this._force.mult(-.25)}}},d.prototype._sensorActive=function(a){var b=h.VectorDistance(this.location,a.location),c=this.sensitivity/2,d=a.width/2+a.boxShadowSpread;return c+d>b},b.exports=d},{"./mover":27,burner:3}],35:[function(a,b,c){function d(){h.call(this)}var e=a("borderpalette"),f=a("colorpalette"),g=a("./config").config,h=a("./mover"),i=a("burner").Utils;i.extend(d,h);var j,k,l,m,n;for(d.borderStyles=["double","double","dotted","dashed"],d.palettes={},d.borderColors={},d.boxShadowColors={},j=0,k=g.defaultColorList.length;k>j;j++)m=g.defaultColorList[j],l=new f,l.addColor({min:20,max:200,startColor:m.startColor,endColor:m.endColor}),d.palettes[m.name]=l,d.borderColors[m.name]=m.borderColor,d.boxShadowColors[m.name]=m.boxShadowColor;for(d.borderPalette=new e,j=0,k=d.borderStyles.length;k>j;j++)n=d.borderStyles[j],d.borderPalette.addBorder({min:2,max:10,style:n});d.prototype.init=function(a,b){d._superClass.init.call(this,a,b);var c=b||{};if(!c.type||"string"!=typeof c.type)throw new Error("Stimulus requires 'type' parameter as a string.");this.type=c.type,this.mass="undefined"!=typeof c.mass?c.mass:50,this.isStatic="undefined"!=typeof c.isStatic?c.isStatic:!0,this.width="undefined"!=typeof c.width?c.width:50,this.height="undefined"!=typeof c.height?c.height:50,this.opacity="undefined"!=typeof c.opacity?c.opacity:.75,this.color=c.color||(d.palettes[this.type]?d.palettes[this.type].getColor():[255,255,255]),this.borderColor=c.borderColor||(d.palettes[this.type]?d.palettes[this.type].getColor():[220,220,220]),this.boxShadowColor=c.boxShadowColor||(d.boxShadowColors[this.type]?d.boxShadowColors[this.type]:[200,200,200]),this.borderWidth="undefined"!=typeof c.borderWidth?c.borderWidth:this.width/i.getRandomNumber(2,8),this.borderStyle="undefined"!=typeof c.borderStyle?c.borderStyle:d.borderPalette.getBorder(),this.borderRadius="undefined"!=typeof c.borderRadius?c.borderRadius:100,this.boxShadowSpread="undefined"!=typeof c.boxShadowSpread?c.boxShadowSpread:this.width/i.getRandomNumber(2,8)},b.exports=d},{"./config":20,"./mover":27,borderpalette:1,burner:3,colorpalette:6}],36:[function(a,b,c){function d(a){e.call(this)}var e=a("./mover"),f=a("quietriot"),g=a("burner").Utils,h=a("burner").Vector;g.extend(d,e),d.prototype.init=function(a,b){d._superClass.init.call(this,a,b);var c=b||{};this.width="undefined"==typeof c.width?10:c.width,this.height="undefined"==typeof c.height?10:c.height,this.remainsOnScreen=!!c.remainsOnScreen,this.maxSpeed="undefined"==typeof c.maxSpeed?1:c.maxSpeed,this.perlin="undefined"==typeof c.perlin?!0:c.perlin,this.perlinSpeed="undefined"==typeof c.perlinSpeed?.005:c.perlinSpeed,this.perlinTime=c.perlinTime||0,this.perlinAccelLow="undefined"==typeof c.perlinAccelLow?-.075:c.perlinAccelLow,this.perlinAccelHigh="undefined"==typeof c.perlinAccelHigh?.075:c.perlinAccelHigh,this.perlinOffsetX="undefined"==typeof c.perlinOffsetX?1e4*Math.random():c.perlinOffsetX,this.perlinOffsetY="undefined"==typeof c.perlinOffsetY?1e4*Math.random():c.perlinOffsetY,this.color=c.color||[255,150,50],this.borderWidth="undefined"==typeof c.borderWidth?0:c.borderWidth,this.borderStyle=c.borderStyle||"none",this.borderColor=c.borderColor||[255,255,255],this.borderRadius="undefined"==typeof c.borderRadius?100:c.borderRadius,this.opacity="undefined"==typeof c.opacity?1:c.opacity,this.zIndex="undefined"==typeof c.zIndex?0:c.zIndex,this._randomVector=new h},d.prototype.applyAdditionalForces=function(){return this.perlin?(this.perlinTime+=this.perlinSpeed,void(this.remainsOnScreen?(this.acceleration=new h,this.velocity=new h,this.location.x=g.map(f.noise(this.perlinTime+this.perlinOffsetX,0),-1,1,0,this.world.width),this.location.y=g.map(f.noise(0,this.perlinTime+this.perlinOffsetY),-1,1,0,this.world.height)):(this.acceleration.x=g.map(f.noise(this.perlinTime+this.perlinOffsetX,0),-1,1,this.perlinAccelLow,this.perlinAccelHigh),this.acceleration.y=g.map(f.noise(0,this.perlinTime+this.perlinOffsetY),-1,1,this.perlinAccelLow,this.perlinAccelHigh)))):(this._randomVector.x=1,this._randomVector.y=1,this._randomVector.normalize(),this._randomVector.rotate(g.degreesToRadians(g.getRandomNumber(0,359))),this._randomVector.mult(this.maxSpeed),void this.applyForce(this._randomVector))},b.exports=d},{"./mover":27,burner:3,quietriot:9}]},{},[26])(26)});
//# sourceMappingURL=flora.min.js.map